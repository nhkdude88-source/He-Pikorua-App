<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2113.65">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="apple-mobile-web-app-capable" content="yes"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;He Pikorua Tracker&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&amp;display=swap');</p>
<p class="p1"><span class="Apple-converted-space">        </span>body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.slide-in { animation: slideIn 0.3s ease-out forwards; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>@keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.fade-in { animation: fadeIn 0.3s ease-out forwards; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.bg-pattern {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-image: radial-gradient(#e5e7eb 1px, transparent 1px);</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-size: 20px 20px;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Custom scrollbar hiding */</p>
<p class="p1"><span class="Apple-converted-space">        </span>::-webkit-scrollbar { width: 0px; background: transparent; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body class="bg-gray-50 text-gray-800 h-screen flex flex-col overflow-hidden"&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- HEADER --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;header class="bg-slate-900 text-white p-4 shadow-lg flex justify-between items-center z-10 shrink-0 pt-safe-top"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h1 class="text-lg font-bold tracking-tight"&gt;He Pikorua &lt;span class="text-emerald-400"&gt;Action&lt;/span&gt;&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;button onclick="showHome()" class="text-slate-300 hover:text-white p-2"&gt;&lt;i class="fa-solid fa-house fa-lg"&gt;&lt;/i&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/header&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- MAIN CONTENT AREA --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;main id="app-content" class="flex-1 overflow-y-auto bg-pattern relative pb-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;!-- Views injected here --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/main&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- FOOTER NAVIGATION --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;footer id="footer-nav" class="bg-white border-t border-gray-200 p-2 hidden shrink-0 grid grid-cols-4 gap-1 text-xs text-center pb-safe-bottom z-20"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;!-- Injected via JS --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/footer&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- ADD CASE MODAL --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="add-modal" class="hidden fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 fade-in"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="bg-white rounded-xl p-6 w-full max-w-sm shadow-2xl"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3 class="text-lg font-bold mb-4"&gt;Add New Case&lt;/h3&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label class="text-xs font-bold text-gray-500 uppercase"&gt;Mokopuna Name&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input type="text" id="new-name" placeholder="e.g. Hemi T." class="w-full mb-3 p-3 border rounded-lg bg-gray-50"&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label class="text-xs font-bold text-gray-500 uppercase"&gt;Kura / School&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input type="text" id="new-kura" placeholder="e.g. Nuhaka School" class="w-full mb-3 p-3 border rounded-lg bg-gray-50"&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label class="text-xs font-bold text-blue-600 uppercase"&gt;&lt;i class="fa-brands fa-google-drive mr-1"&gt;&lt;/i&gt; Google Doc Link&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input type="text" id="new-doc-link" placeholder="Paste Doc URL here..." class="w-full mb-4 p-3 border border-blue-200 rounded-lg bg-blue-50 text-sm"&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="flex gap-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button onclick="closeModal()" class="flex-1 py-3 rounded-lg bg-gray-200 font-bold text-gray-600"&gt;Cancel&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button onclick="saveNewCase()" class="flex-1 py-3 rounded-lg bg-emerald-600 text-white font-bold"&gt;Save&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- JAVASCRIPT LOGIC --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- DATA STORE ---</p>
<p class="p1"><span class="Apple-converted-space">        </span>let cases = JSON.parse(localStorage.getItem('rtlb_cases_v2')) || [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>let currentCaseId = null;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function saveData() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>localStorage.setItem('rtlb_cases_v2', JSON.stringify(cases));</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- VIEWS ---</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 1. HOME DASHBOARD</p>
<p class="p1"><span class="Apple-converted-space">        </span>function showHome() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentCaseId = null;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const content = document.getElementById('app-content');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('footer-nav').classList.add('hidden');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>let caseListHtml = cases.length &gt; 0 ? cases.map(c =&gt; `</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="bg-white p-4 rounded-xl shadow-sm border-l-4 border-emerald-500 mb-3 active:scale-95 transition-transform flex justify-between items-center group relative"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div onclick="openCase(${c.id})" class="flex-1 cursor-pointer"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h3 class="font-bold text-lg text-slate-800 truncate pr-2"&gt;${c.name}&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p class="text-sm text-slate-500 truncate"&gt;&lt;i class="fa-solid fa-school mr-1"&gt;&lt;/i&gt; ${c.kura}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>${c.docUrl ? `&lt;p class="text-xs text-blue-600 mt-1"&gt;&lt;i class="fa-solid fa-link mr-1"&gt;&lt;/i&gt; Linked to Doc&lt;/p&gt;` : ''}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button onclick="deleteCase(${c.id})" class="text-gray-300 hover:text-red-500 p-3"&gt;&lt;i class="fa-solid fa-trash"&gt;&lt;/i&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>`).join('') : `&lt;div class="text-center py-10 text-gray-400"&gt;No active cases.&lt;br&gt;Tap '+' to add a Mokopuna.&lt;/div&gt;`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>content.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="p-4 fade-in max-w-md mx-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="flex justify-between items-center mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h2 class="text-xl font-bold text-slate-800"&gt;My Caseload&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button onclick="openModal()" class="bg-slate-900 text-white w-10 h-10 rounded-full flex items-center justify-center shadow-lg active:scale-90 transition-transform"&gt;&lt;i class="fa-solid fa-plus"&gt;&lt;/i&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>${caseListHtml}</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 2. CASE VIEW</p>
<p class="p1"><span class="Apple-converted-space">        </span>function openCase(id) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentCaseId = id;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const c = cases.find(x =&gt; x.id === id);</p>
<p class="p1"><span class="Apple-converted-space">            </span>if(!c) return showHome();</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const content = document.getElementById('app-content');</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('footer-nav').classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">            </span>renderFooter(id);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const docButton = c.docUrl<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>? `&lt;a href="${c.docUrl}" target="_blank" class="block w-full text-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded-lg text-sm mb-4"&gt;&lt;i class="fa-solid fa-arrow-up-right-from-square mr-2"&gt;&lt;/i&gt; Open Google Doc&lt;/a&gt;`</p>
<p class="p1"><span class="Apple-converted-space">                </span>: `&lt;button onclick="alert('No link saved! Delete and re-add this case to add a link.')" class="block w-full text-center bg-gray-200 text-gray-500 font-bold py-2 rounded-lg text-sm mb-4"&gt;No Doc Linked&lt;/button&gt;`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>content.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="p-4 slide-in max-w-md mx-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="bg-slate-800 text-white p-4 rounded-xl mb-6 shadow-lg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h2 class="text-2xl font-bold"&gt;${c.name}&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;p class="opacity-80 mb-2"&gt;${c.kura}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>${docButton}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3"&gt;Workflow Phases&lt;/h3&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="grid grid-cols-1 gap-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>${renderPhaseButton(id, '1. Te Waharoa', 'Admin &amp; Consent', 'fa-door-open', 'bg-blue-50 text-blue-700')}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>${renderPhaseButton(id, '3. Kohikohi', 'Te Whare o Oro Scan', 'fa-ear-listen', 'bg-purple-50 text-purple-700')}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>${renderPhaseButton(id, '5. Tātai', 'ReGrOWTH Plan', 'fa-compass-drafting', 'bg-orange-50 text-orange-700')}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>${renderPhaseButton(id, '6. Whakamahi', 'Log Contact/Mahi', 'fa-person-walking', 'bg-emerald-50 text-emerald-700')}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>${renderPhaseButton(id, '7. Whai Whakaaro', 'Outcome Scales', 'fa-scale-balanced', 'bg-cyan-50 text-cyan-700')}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function renderPhaseButton(id, title, sub, icon, colorClass) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>return `</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button onclick="openForm(${id}, '${title}')" class="${colorClass} p-4 rounded-xl flex items-center shadow-sm text-left active:scale-95 transition-transform"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="w-10 h-10 rounded-full bg-white/50 flex items-center justify-center mr-4 shrink-0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;i class="fa-solid ${icon} text-lg"&gt;&lt;/i&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="font-bold"&gt;${title}&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="text-xs opacity-80"&gt;${sub}&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/button&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 3. FORM VIEWS</p>
<p class="p1"><span class="Apple-converted-space">        </span>function openForm(id, phase) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentCaseId = id;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const content = document.getElementById('app-content');</p>
<p class="p1"><span class="Apple-converted-space">            </span>let formHtml = '';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- PHASE 3: KOHIKOHI ---</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (phase.includes('Kohikohi')) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>formHtml = `</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="space-y-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;h4 class="font-bold text-slate-700 mb-2 border-b pb-1"&gt;1. Te Tūāpapa (Environment)&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;input type="text" id="p3_universal" class="w-full p-3 bg-gray-50 rounded mb-2 border-gray-200" placeholder="Te Matua (Universal)..."&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;input type="text" id="p3_targeted" class="w-full p-3 bg-gray-50 rounded border-gray-200" placeholder="Te Kāhui (Targeted)..."&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;div class="bg-white p-4 rounded-lg shadow-sm border border-purple-100"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;h4 class="font-bold text-purple-800 mb-2 border-b pb-1"&gt;2. Te Whare o Oro Scan&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;div class="space-y-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>${renderCheckbox('p3_tuarongo', 'Pou Tuarongo (Safety)', 'red')}</p>
<p class="p1"><span class="Apple-converted-space">                                </span>${renderCheckbox('p3_tahu', 'Pou Tāhū (Rhythm)', 'yellow')}</p>
<p class="p1"><span class="Apple-converted-space">                                </span>${renderCheckbox('p3_tokomanawa', 'Pou Tokomanawa (Connect)', 'blue')}</p>
<p class="p1"><span class="Apple-converted-space">                                </span>${renderCheckbox('p3_kaiawha', 'Pou Kaiāwhā (Learning)', 'green')}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- PHASE 5: TĀTAI ---</p>
<p class="p1"><span class="Apple-converted-space">            </span>else if (phase.includes('Tātai')) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>formHtml = `</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="bg-white p-4 rounded-lg shadow-sm space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h4 class="font-bold text-orange-700 mb-2 border-b pb-1"&gt;ReGrOWTH Planner&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;textarea id="p5_reality" class="w-full p-3 bg-gray-50 rounded border h-20" placeholder="Reality (Current State)..."&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;input type="text" id="p5_goal" class="w-full p-3 bg-gray-50 rounded border" placeholder="Growing Goal..."&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;input type="text" id="p5_will" class="w-full p-3 bg-gray-50 rounded border" placeholder="Will (Who does what?)..."&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;textarea id="p5_tactics" class="w-full p-3 bg-gray-50 rounded border h-20" placeholder="Tactics (Strategies)..."&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- PHASE 6: WHAKAMAHI (Log) ---</p>
<p class="p1"><span class="Apple-converted-space">            </span>else if (phase.includes('Whakamahi')) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const today = new Date().toISOString().split('T')[0];</p>
<p class="p1"><span class="Apple-converted-space">                </span>formHtml = `</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="bg-white p-4 rounded-lg shadow-sm space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h4 class="font-bold text-emerald-700 mb-2 border-b pb-1"&gt;Real-Time Contact Log&lt;/h4&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;input type="date" id="p6_date" class="w-full p-3 bg-gray-50 rounded border" value="${today}"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;select id="p6_type" class="w-full p-3 bg-gray-50 rounded border"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;option&gt;Kanohi ki te kanohi (Visit)&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;option&gt;Email / Phone&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;option&gt;Observation&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                            </span>&lt;option&gt;Coaching Session&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;textarea id="p6_notes" class="w-full p-3 bg-gray-50 rounded border h-24" placeholder="Mahi / Notes..."&gt;&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>else {</p>
<p class="p1"><span class="Apple-converted-space">                </span>formHtml = `&lt;div class="p-8 text-center text-gray-400"&gt;Section available in full doc.&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>content.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="p-4 slide-in max-w-md mx-auto"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="flex items-center mb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;button onclick="openCase(${id})" class="mr-3 text-slate-500 p-2"&gt;&lt;i class="fa-solid fa-arrow-left"&gt;&lt;/i&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;h2 class="font-bold text-lg text-slate-800 truncate"&gt;${phase}&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>${formHtml}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;button onclick="generateAndOpen('${phase}')" class="mt-6 w-full bg-slate-900 text-white font-bold py-4 rounded-xl shadow-lg active:scale-95 transition-transform flex justify-center items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;i class="fa-solid fa-file-pen mr-2 text-emerald-400"&gt;&lt;/i&gt; Update Doc</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;p class="text-center text-xs text-gray-400 mt-2"&gt;Copies text &amp; opens Google Docs&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function renderCheckbox(id, label, color) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>return `</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="p-2 bg-${color}-50 rounded border border-${color}-100"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label class="flex items-center cursor-pointer mb-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;input type="checkbox" id="${id}" class="w-5 h-5 accent-${color}-600 mr-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="font-bold text-${color}-800 text-sm"&gt;${label}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;input type="text" id="${id}_note" class="w-full p-2 text-sm bg-white border border-${color}-200 rounded" placeholder="Observed behaviour..."&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 4. GENERATE &amp; OPEN DOC</p>
<p class="p1"><span class="Apple-converted-space">        </span>function generateAndOpen(phase) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>let text = "";</p>
<p class="p1"><span class="Apple-converted-space">            </span>const currentCase = cases.find(c =&gt; c.id === currentCaseId);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// Generate Text</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (phase.includes('Kohikohi')) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>text = `**PHASE 3: KOHIKOHI (Data Scan)**\n&gt; **Universal:** ${getValue('p3_universal')}\n&gt; **Targeted:** ${getValue('p3_targeted')}\n`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if(getChecked('p3_tuarongo')) text += `&gt; [x] Pou Tuarongo: ${getValue('p3_tuarongo_note')}\n`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if(getChecked('p3_tahu')) text += `&gt; [x] Pou Tāhū: ${getValue('p3_tahu_note')}\n`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if(getChecked('p3_tokomanawa')) text += `&gt; [x] Pou Tokomanawa: ${getValue('p3_tokomanawa_note')}\n`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if(getChecked('p3_kaiawha')) text += `&gt; [x] Pou Kaiāwhā: ${getValue('p3_kaiawha_note')}\n`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>else if (phase.includes('Tātai')) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>text = `**PHASE 5: TĀTAI (ReGrOWTH)**\n&gt; **Reality:** ${getValue('p5_reality')}\n&gt; **Goal:** ${getValue('p5_goal')}\n&gt; **Will:** ${getValue('p5_will')}\n&gt; **Tactics:** ${getValue('p5_tactics')}`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>else if (phase.includes('Whakamahi')) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>text = `**LOG: ${getValue('p6_date')}**\n&gt; **Type:** ${getValue('p6_type')}\n&gt; **Notes:** ${getValue('p6_notes')}`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// The Workflow: Copy -&gt; Wait -&gt; Open Doc</p>
<p class="p1"><span class="Apple-converted-space">            </span>navigator.clipboard.writeText(text).then(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if(currentCase &amp;&amp; currentCase.docUrl) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>// Try to open the doc</p>
<p class="p1"><span class="Apple-converted-space">                    </span>window.location.href = currentCase.docUrl;<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>alert("Text copied! (No Doc Link saved to open)");</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}).catch(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>alert("Error copying. Please manually select text.");</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// HELPERS</p>
<p class="p1"><span class="Apple-converted-space">        </span>function getValue(id) { return document.getElementById(id) ? document.getElementById(id).value : ''; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>function getChecked(id) { return document.getElementById(id) ? document.getElementById(id).checked : false; }</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// MODAL FUNCTIONS</p>
<p class="p1"><span class="Apple-converted-space">        </span>function openModal() { document.getElementById('add-modal').classList.remove('hidden'); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>function closeModal() { document.getElementById('add-modal').classList.add('hidden'); }</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>function saveNewCase() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const name = document.getElementById('new-name').value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const kura = document.getElementById('new-kura').value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const docUrl = document.getElementById('new-doc-link').value;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if(name &amp;&amp; kura) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>cases.push({ id: Date.now(), name, kura, docUrl, phase: 'Te Waharoa' });</p>
<p class="p1"><span class="Apple-converted-space">                </span>saveData();</p>
<p class="p1"><span class="Apple-converted-space">                </span>closeModal();</p>
<p class="p1"><span class="Apple-converted-space">                </span>showHome();</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('new-name').value = '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('new-kura').value = '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>document.getElementById('new-doc-link').value = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function deleteCase(id) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if(confirm("Delete this case?")) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>cases = cases.filter(c =&gt; c.id !== id);</p>
<p class="p1"><span class="Apple-converted-space">                </span>saveData();</p>
<p class="p1"><span class="Apple-converted-space">                </span>showHome();</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function renderFooter(id) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const footer = document.getElementById('footer-nav');</p>
<p class="p1"><span class="Apple-converted-space">            </span>footer.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button onclick="openForm(${id}, '3. Kohikohi')" class="p-2 text-purple-700 hover:bg-purple-50 rounded flex flex-col items-center"&gt;&lt;i class="fa-solid fa-ear-listen mb-1"&gt;&lt;/i&gt; &lt;span class="text-[10px]"&gt;Kohikohi&lt;/span&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button onclick="openForm(${id}, '5. Tātai')" class="p-2 text-orange-700 hover:bg-orange-50 rounded flex flex-col items-center"&gt;&lt;i class="fa-solid fa-compass-drafting mb-1"&gt;&lt;/i&gt; &lt;span class="text-[10px]"&gt;Tātai&lt;/span&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button onclick="openForm(${id}, '6. Whakamahi')" class="p-2 text-emerald-700 hover:bg-emerald-50 rounded flex flex-col items-center"&gt;&lt;i class="fa-solid fa-person-walking mb-1"&gt;&lt;/i&gt; &lt;span class="text-[10px]"&gt;Log&lt;/span&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button onclick="openForm(${id}, '7. Whai Whakaaro')" class="p-2 text-cyan-700 hover:bg-cyan-50 rounded flex flex-col items-center"&gt;&lt;i class="fa-solid fa-scale-balanced mb-1"&gt;&lt;/i&gt; &lt;span class="text-[10px]"&gt;Review&lt;/span&gt;&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Init</p>
<p class="p1"><span class="Apple-converted-space">        </span>showHome();</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
